<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a id="player-email" class="nav-link disabled" href="#">Disabled</a>
                </li>
            </ul>
            <button id="button-log-in-out" onclick="logIn()" class="btn btn-outline-success my-2 my-sm-0">Log
                In</button>
        </div>
    </nav>

    <!-- Resource Quantities -->
    <div>
        <div class="container">
            <div class="row">
                <div class="col">
                </div>
                <div class="col">
                    <h1>Army Logistics</h1>
                </div>
                <div class="col">
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="row">
                        <div class="col">
                            <p>Raw Metal: </p>
                        </div>
                        <div class="col">
                            <p id="label-raw-metal-farm">0</p>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="row">
                        <div class="col">
                            <p>Sulphur: </p>
                        </div>
                        <div class="col">
                            <p id="label-sulphur">0</p>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="row">
                        <div class="col">
                            <p>Charcoal: </p>
                        </div>
                        <div class="col">
                            <p id="label-charcoal">0</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col">
                    <div class="row">
                        <div class="col">
                            <p>Metal: </p>
                        </div>
                        <div class="col">
                            <p id="label-metal-farm">0</p>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="row">
                        <div class="col">
                            <p>Gunpowder: </p>
                        </div>
                        <div class="col">
                            <p>0</p>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="row">
                        <div class="col">
                            <p></p>
                        </div>
                        <div class="col">
                            <p></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Farming -->
    <div class="container">
        <div id="accordion">
            <div class="card">
                <div class="card-header" id="headingOne">
                    <h5 class="mb-0">
                        <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne"
                            aria-expanded="true" aria-controls="collapseOne">
                            Farming
                        </button>
                    </h5>
                </div>

                <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                    <div class="card-body">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-dark" onclick="generateRawMetal()">Find Metal</button>
                            </div>
                            <div class="col">
                                <button class="btn btn-dark" onclick="generateSulphur()">Find Sulphur</button>
                            </div>
                            <div class="col">
                                <button class="btn btn-dark" onclick="generateCharcoal()">Find Charcoal</button>
                            </div>
                        </div>
                        <div class="row">
                            <div><br></div>
                        </div>
                        <div id="container-raw-materials" style="display: grid; grid-template-columns: repeat(10, 1fr)">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <br>

    <!-- Refinary -->
    <div class="container">
        <div id="accordion">
            <div class="card">
                <div class="card-header" id="headingOne">
                    <h5 class="mb-0">
                        <button class="btn btn-link" data-toggle="collapse" data-target="#collapseRefinary"
                            aria-expanded="true" aria-controls="collapseOne">
                            Refinary
                        </button>
                    </h5>
                </div>

                <div id="collapseRefinary" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                    <div class="card-body">
                        <div class="row">
                            <label id="label-refinary-message"></label>
                        </div>
                        <div class="row">
                            <div class="row">
                                <div class="col">
                                    <button class="btn btn-dark" onclick="refineMetal()">Refine Metal</button>
                                </div>
                            </div>
                            <div><br></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase App -->
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyBGBlUamXR19lhfBv_zyXWi_yrdBq8jjXg",
            authDomain: "army-logistics-ea3a7.firebaseapp.com",
            projectId: "army-logistics-ea3a7",
            storageBucket: "army-logistics-ea3a7.appspot.com",
            messagingSenderId: "665346603605",
            appId: "1:665346603605:web:81dcf758b3386b61aeb2dc",
            measurementId: "G-9F7X6TV31Z"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        var database = firebase.firestore()

        firebase.auth().onAuthStateChanged(function (user) {
            if (user) {
                handleButtonLogInOut()
                loadPlayerData()
            } else {
                // No user is signed in.
            }
        });
        function logIn() {
            var provider = new firebase.auth.GoogleAuthProvider()
            firebase.auth()
                .signInWithPopup(provider)
                .then((result) => {
                    /** @type {firebase.auth.OAuthCredential} */
                    var credential = result.credential;

                    // This gives you a Google Access Token. You can use it to access the Google API.
                    var token = credential.accessToken;
                    // The signed-in user info.
                    var user = result.user;
                    // localStorage.setItem("user", user);
                    handleButtonLogInOut()
                    // ...
                }).catch((error) => {
                    // Handle Errors here.
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    // The email of the user's account used.
                    var email = error.email;
                    // The firebase.auth.AuthCredential type that was used.
                    var credential = error.credential;

                    console.log(error.message)
                    handleButtonLogInOut()

                    firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL)
                    // ...
                })
        }
        function logOut() {
            firebase.auth().signOut()
            // localStorage.removeItem('user')
            handleButtonLogInOut()
        }
    </script>
    <script src="main.js"></script>
    <script src="player.js"></script>
    <script src="queries.js"></script>
</body>

</html>